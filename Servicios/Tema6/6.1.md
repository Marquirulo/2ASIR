# TEMA 6. SERVICIOS WEB: APACHE

# 6.1:
EL PROTOCOLO HTTP: EL CLIENTE  
Vamos a ver el lado del cliente, para eso nos pasamos por un servidor y vemos lo que envía el cliente para solicitar la página web.  
EN “DEBIAN SERVIDOR”, COMO root, LANZAR “nc”  
Lo lanzamos con “nc -lp 80”: l para que escuche y p para especificar el puerto:  
EN “UBUNTU”, ESCRIBIMOS LA CONEXIÓN A “DEBIAN  SERVIDOR” EN EL NAVEGADOR DE INTERNET.  

Escribimos en la barra de direcciones del navegador web la solicitud http con una petición de recurso: http://10.131.72.1/pagina.html


EN “DEBIAN SERVIDOR”, COMPROBAR QUE EN “nc” HA  APARECIDO LA SOLICITUD http

![imagen](https://github.com/user-attachments/assets/fd52fc80-a278-44f7-929e-b70c733950f5)

EN “DEBIAN SERVIDOR”, CONTESTAR ENVIANDO UNA  PÁGINA WEB COMO RESPUESTA

![imagen](https://github.com/user-attachments/assets/b40c1bee-4735-4715-a82f-c597fa3ddd2c)

AL TERMINAR LA PÁGINA, PULSAR Ctrl+c PARA  DESCONECTAR

EN “UBUNTU”, COMPROBAR QUE HA APARECIDO LA PÁGINA


Entramos en la configuración del navegador:

# 6.2

[AÑADIR UNA CADENA CON EL VALOR DE OTRO NAVEGADOR  
➔ Nos colocamos encima de cualquier valor y con el botón derecho elegimos  
nuevo, cadena y escribimos general.useragent.override y en el valor  
escribimos “Nuevo navegador” y aceptamos:  

EN “DEBIAN SERVIDOR”, VOLVER A LANZAR nc  

Lanzamos “nc-lp 80” para ejecutar el programa.  

EN “UBUNTU”, CONECTAR A “http://10.x.y.1”  

Volvemos a conectar a la IP de Debian para generar una solicitud http.  

EN “DEBIAN SERVIDOR”, ¿ APARECE COMO  IDENTIFICADOR EL NUEVO NAVEGADOR ? 

![imagen](https://github.com/user-attachments/assets/a90a1838-6f53-4a6f-a801-8621313684ec)

# 6.3 
EN “UBUNTU”, EN EL NAVEGADOR EDITAR LAS PREFERENCIAS

En “Configuración”, dentro de la pestaña “Contenido”, seleccionamos “Idioma”.

AÑADIR CUALQUIER IDIOMA, COLOCARLO EL PRIMERO

Colocamos en primer lugar el idioma que queramos que sirva el servidor web.

EN “DEBIAN SERVIDOR”, LANZAR nc

Lanzamos “nc -lp 80”

EN “UBUNTU”, CONECTAR A “http://10.x.y.1”

En la línea “Accept-language” vemos que el primer código de idioma es el correspondiente al que hemos establecido en primer lugar en Firefox:

![imagen](https://github.com/user-attachments/assets/501d14ff-01f9-447d-b602-a00754a14a58)

# 6.5 6.6

✔ NOTA TEÓRICA:

Definición:

Cadena de caracteres que sirve para localizar de manera unívoca
recursos en internet.

Formato: protocolo://servidor:puerto/recurso#enlace

No es obligatorio utilizar todas las partes del formato, solamente las
que necesitemos en cada caso (el puerto y el enlace son opcionales).

.- En Debian Servidor lanzamos nc: nc -lp 8080

.- En Ubuntu Cliente en el navegador y escribimos:

http://IP:8080/pagina.html#enlace
- En Debian Servidor comprobamos que Ubuntu Cliente se ha conectado por el
puerto 8080 y que ha realizado la petición de la página:

➔ ¿Aparece el enlace? **SI**

![imagen](https://github.com/user-attachments/assets/a601384b-2eb2-487b-a99d-97d660052a51)

.- En Debian Servidor instalamos apache:
apt-get install apache2
.- Comprobamos que se ha instalado:
netstat -tlnp | grep 8
.- Comprobamos que responde a las peticiones
➔ Desde Ubuntu Cliente conectamos http://IP:

![imagen](https://github.com/user-attachments/assets/e624a1b4-5088-4157-a7e1-3daa66884098)

PRÁCTICA 6.7.- PÁGINAS SERVIDAS POR APACHE:

1.- En Debian servidor vamos al directorio /var/www/html. Comprobamos que existe un fichero llamado index.html: **EXISTE**

2.- Comprobamos que el contenido es el que recibimos desde Ubuntu Cliente (En la url no hemos especificado el nombre del fichero, Apache asume que el recurso es /):**Lo asume**

3.- En Debian Servidor en el directorio /var/www/html. Creamos un fichero llamado pagina1.html:

![imagen](https://github.com/user-attachments/assets/cdf76b04-88e4-4934-93df-e5b85262ded6)

4.- En Ubuntu Cliente lanzamos el navegador y escribimos http://IP/pagina1.html:

![imagen](https://github.com/user-attachments/assets/3f563f1e-53e3-46e5-8016-159eef7e8364)

5.- En Debian Servidor en el directorio /var/www/html Insertar una imagen (logo.png):

![imagen](https://github.com/user-attachments/assets/b7ab2856-5021-4144-b5ce-d88f0f28b15e)


6.- En Ubuntu Cliente lanzamos el navegador y escribimos http://IP/logo.png:

![imagen](https://github.com/user-attachments/assets/6097eaa6-16cc-4c6e-807a-2769413181bd)


7.- En Debian Servidor modificamos pagina.html para que muestre logo.png:

8.- En Ubuntu Cliente recargamos pagina1.html para ver el resultado:

![imagen](https://github.com/user-attachments/assets/7374579b-b6de-400a-b80a-2dc54d98ea6c)

9.-En Debian Servidor en pagina1.html, añadimos un enlace a pagina2.html:

![imagen](https://github.com/user-attachments/assets/812828f7-3788-44fc-baa7-dac33dc2d112)


10.- En Ubuntu Cliente recargamos pagina1.html e intentamos ir a pagina2.html:

![imagen](https://github.com/user-attachments/assets/88d71ed9-5963-4b2f-a4fe-b3c7711f115c)

11.- En Debian Servidor creamos pagina2.html con un enlace a pagina1.html:

12.- En Ubuntu Cliente recargamos pagina2.html e intentamos ir a pagina1.html:

# 6.8

✔ NOTA TEÓRICA: 
Hace referencia a cuando el navegador realiza una solicitud HTTP al servidor, este no cierra la conexión TCP con el cliente, que queda a la espera de nuevas solicitudes.  
Esto optimiza el uso de las conexiones TCP debido a que habitualmente un fichero html hace referencia a otros recursos que también se solicitan al servidor.  
Al mantener la conexión viva, estos recursos se consiguen a través de ella en lugar de exigir conexiones TCP adicionales ahorrando tráfico en la red.  
Este mecanismo deber soportarlo el Cliente y admitirlo el Servidor.  

1.- En Ubuntu Cliente vaciamos la cache del navegador:
2.- En Ubuntu Cliente lanzamos wireshark:
3.- En Ubuntu Cliente cargamos en el navegador pagina1.html:
4.- En Ubuntu Cliente vamos a wireshark y comprobamos que se ha creado una conexión y que esta no se ha cerrado:
(Vemos la conexión creada (http SYN) entre Ubuntu Cliente y Debian Servidor cuando hemos cargado página1.html)

![imagen](https://github.com/user-attachments/assets/5219a853-953e-4b4b-ba62-dbd4d7b41b19)

5.- En Ubuntu Cliente volvemos al navegador y pulsamos sobre el enlace a pagina2.html y en esta página sobre el enlace a pagina1.html, repetimos el proceso varias veces:
6.- En Ubuntu Cliente vamos a wireshark y comprobamos que no se han creado nuevas  conexiones. Esperamos unos instantes para que se cierre la conexión y verificamos en wireshark que se ha cerrado:

![imagen](https://github.com/user-attachments/assets/57053b15-bf6b-4fb3-befe-a439db16df5a)

7.- En Ubuntu Cliente anulamos Keep-Alive: 
En la barra de direcciones y escribimos about:config 
Buscamos la preferencia network.http.Keep-alive (si no la creamos)
Cambiarla a False


8.- En Debian Servidor lanzamos un servicio apache por el puerto 8080
nc -lp 8080
9.- En Ubuntu Cliente vamos al navegador en http://IP:8080:
➔ ¿Qué ocurre con la conexión? Que se cierra

10.- Volvemos a hacer las pruebas anteriores desde el punto 1 al 6
➔ En Ubuntu Cliente vaciamos la cache del navegador. Lanzamos wireshark. Cargamos en el navegador pagina1.html. Vamos a wireshark y comprobamos que se ha creado una conexión y lo que ocurre con ella:
✔ En este caso comprobamos que sí que se crea una nueva conexión (http SYN) cuando solicitamos del servidor el recurso pagina2.html y que además se cierra dicha conexión cuando se sirve dicho recurso.
➔ Volvemos a configurar preferencia network.http.Keep-alive a su valor por defecto.

![imagen](https://github.com/user-attachments/assets/3f6b6001-50b1-448e-a56e-a4c8beaf8c4e)

